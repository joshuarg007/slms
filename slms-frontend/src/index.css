@tailwind base;
@tailwind components;
@tailwind utilities;

/* src/index.css */
:root {
  color-scheme: light dark;
}

html {
  transition: background-color 200ms ease, color 200ms ease;
}

/* ============================================
   Accessibility Enhancements
   ============================================ */

/* Skip link styling */
.skip-link {
  @apply absolute -top-12 left-4 z-[9999] px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg shadow-lg transition-all duration-200;
}

.skip-link:focus {
  @apply top-4;
}

/* Enhanced focus indicators for keyboard users */
*:focus-visible {
  @apply outline-2 outline-offset-2 outline-indigo-500;
}

/* Button focus states */
button:focus-visible,
[role="button"]:focus-visible {
  @apply ring-2 ring-indigo-500 ring-offset-2 ring-offset-white dark:ring-offset-gray-900;
}

/* Input focus states */
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
  @apply ring-2 ring-indigo-500 ring-offset-0 border-indigo-500;
}

/* Link focus states */
a:focus-visible {
  @apply outline-2 outline-offset-2 outline-indigo-500 rounded-sm;
}

/* Interactive card focus states */
[tabindex="0"]:focus-visible {
  @apply ring-2 ring-indigo-500 ring-offset-2 ring-offset-white dark:ring-offset-gray-900 rounded-xl;
}

/* Respect user's reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .animate-spin,
  .animate-pulse,
  .animate-bounce {
    animation: none !important;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  * {
    border-color: currentColor !important;
  }

  .bg-gradient-to-br,
  .bg-gradient-to-r {
    background: currentColor !important;
    -webkit-background-clip: unset !important;
    background-clip: unset !important;
    color: inherit !important;
  }
}

/* Screen reader only - hide visually but keep accessible */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Make skip to content visible on focus */
.sr-only:focus {
  position: fixed;
  top: 1rem;
  left: 1rem;
  width: auto;
  height: auto;
  padding: 0.5rem 1rem;
  margin: 0;
  overflow: visible;
  clip: auto;
  white-space: normal;
  z-index: 9999;
  background: #4f46e5;
  color: white;
  border-radius: 0.5rem;
}

/* Better touch targets for mobile accessibility */
@media (pointer: coarse) {
  button,
  [role="button"],
  a,
  input,
  select,
  textarea {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Focus within for form groups */
.focus-within-ring:focus-within {
  @apply ring-2 ring-indigo-500;
}

/* Selection colors for better visibility */
::selection {
  @apply bg-indigo-200 text-indigo-900;
}

.dark ::selection {
  @apply bg-indigo-800 text-indigo-100;
}

/* Move reCAPTCHA badge to bottom left (avoid chat bubble clash) */
.grecaptcha-badge {
  left: 10px !important;
  right: auto !important;
}

/* Shimmer sweep animation for CTA button - desktop only */
@keyframes shimmer-sweep {
  0% {
    transform: translateX(-100%) skewX(-15deg);
  }
  15% {
    transform: translateX(200%) skewX(-15deg);
  }
  100% {
    transform: translateX(200%) skewX(-15deg);
  }
}

.shimmer-button {
  position: relative !important;
  overflow: hidden !important;
}

/* Only animate on desktop, override reduced-motion for this specific element */
@media (min-width: 768px) and (prefers-reduced-motion: no-preference) {
  .shimmer-button::before {
    content: '' !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    width: 50% !important;
    height: 100% !important;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.15) 25%,
      rgba(255, 255, 255, 0.3) 50%,
      rgba(255, 255, 255, 0.15) 75%,
      transparent 100%
    ) !important;
    transform: translateX(-100%) skewX(-15deg);
    animation: shimmer-sweep 4s ease-in-out infinite !important;
    animation-delay: 1s !important;
    pointer-events: none !important;
  }
}
