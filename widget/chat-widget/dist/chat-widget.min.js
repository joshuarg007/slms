!function(){"use strict";if(document.getElementById("site2crm-chat-widget"))return;let e=document.currentScript;if(!e){const t=document.querySelectorAll("script[data-widget-key]");t.length>0&&(e=t[t.length-1])}const t=e?.getAttribute("data-widget-key");if(!t)return void console.error("Site2CRM Chat Widget: Missing data-widget-key attribute");const n=e?.getAttribute("data-exclude-paths"),r=n?n.split(",").map(function(e){return e.trim()}):[],i=parseInt(e?.getAttribute("data-z-index"),10)||999998,a=i+1;function o(){return function(e){for(var t=0;t<r.length;t++){var n=r[t];if(n.endsWith("*")){if(e.startsWith(n.slice(0,-1)))return!0}else if(e===n)return!0}return!1}(window.location.pathname)||"true"===localStorage.getItem("site2crm_hide_chat")||document.cookie.includes("site2crm_hide_chat=true")}function s(e,t,n){try{if("get"===e)return sessionStorage.getItem(t);if("set"===e)return sessionStorage.setItem(t,n),n}catch(e){return null}}function c(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML}var l="https://api.site2crm.io/api/public/chat-widget";var d=function(){var e=s("get","s2c_chat_session");if(e)return e;var t="s2c_"+Date.now().toString(36)+"_"+Math.random().toString(36).substr(2,9);return s("set","s2c_chat_session",t),t}();function p(e){try{return localStorage.getItem(e)}catch(e){return null}}function u(e,t){try{localStorage.setItem(e,t)}catch(e){}}var b=p("s2c_gdpr_consent");function g(e){u("s2c_config_"+t,JSON.stringify({data:e,_ts:Date.now()}))}var x,h,f,m,y,v,w,k,_=!1,C=!1,S=null,M=[],z=0,E={small:{size:52,icon:26},medium:{size:64,icon:30},large:{size:76,icon:36}};var L={chat:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/><circle cx="12" cy="12" r="1" fill="currentColor"/><circle cx="8" cy="12" r="1" fill="currentColor"/><circle cx="16" cy="12" r="1" fill="currentColor"/></svg>',message:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/><line x1="2" y1="20" x2="8" y2="14" opacity="0.5"/><line x1="22" y1="20" x2="16" y2="14" opacity="0.5"/></svg>',support:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3 18v-6a9 9 0 0 1 18 0v6"/><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"/><circle cx="12" cy="12" r="2" opacity="0.4"/><path d="M12 14v3" opacity="0.4"/></svg>',robot:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="8" width="18" height="12" rx="2"/><circle cx="9" cy="14" r="1.5" fill="currentColor"/><circle cx="15" cy="14" r="1.5" fill="currentColor"/><path d="M12 2v4"/><circle cx="12" cy="2" r="1" fill="currentColor"/><path d="M8 17h8" stroke-linecap="round"/><path d="M1 12h2M21 12h2" opacity="0.5"/></svg>',sparkle:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2l2.4 7.2H22l-6.2 4.5 2.4 7.3L12 16.5 5.8 21l2.4-7.3L2 9.2h7.6L12 2z"/><circle cx="19" cy="5" r="1.5" fill="currentColor" opacity="0.6"/><circle cx="5" cy="19" r="1" fill="currentColor" opacity="0.4"/><path d="M19 2v2M18 3h2" opacity="0.5"/></svg>',wave:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2L4 14h7l-1 8 9-12h-7l1-8z"/><path d="M17 6l2-2M19 10h2M17 14l2 2" opacity="0.4"/></svg>',ai:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"/><circle cx="12" cy="12" r="4" opacity="0.5"/><circle cx="12" cy="12" r="1" fill="currentColor"/><path d="M12 3v2M12 19v2M3 12h2M19 12h2" opacity="0.6"/><path d="M5.6 5.6l1.4 1.4M17 17l1.4 1.4M5.6 18.4l1.4-1.4M17 7l1.4-1.4" opacity="0.4"/></svg>'},A='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>',T='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>',q='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>';async function Y(e){for(var n=0;n<=e;n++){try{var r=await fetch(l+"/config/"+t);if(r.ok){var i=await r.json();return g(i),i}if(r.status>=400&&r.status<500)return null}catch(t){if(n===e)return null}await new Promise(function(e){setTimeout(e,1e3*Math.pow(2,n))})}return null}async function j(){try{var e=function(){try{var e=p("s2c_config_"+t);if(!e)return null;var n=JSON.parse(e);if(Date.now()-n._ts<3e5)return n.data}catch(e){}return null}();if(e?(S=e,Y(2)):S=await Y(2),!S)return void console.warn("Site2CRM Chat Widget: Unable to load config");(h=document.createElement("div")).id="site2crm-chat-widget",document.body.appendChild(h),x=h.attachShadow({mode:"open"});var n=document.createElement("link");n.rel="stylesheet",n.href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap",x.appendChild(n);var r=document.createElement("style");r.textContent=function(e){var t,n,r,o=e.primary_color||"#6366f1",s=e.chat_bg_color||"#0f0f23",c=e.user_bubble_color||o,l=e.bot_bubble_color||"#1e1e3f",d=E[e.button_size]||E.medium,p=e.button_shape||"bubble",u=e.gradient_type||"none",b=e.gradient_color_1,g=e.gradient_color_2,x=e.gradient_color_3,h=null!=e.gradient_angle?e.gradient_angle:135,f=null!=e.button_opacity?e.button_opacity:1,m=e.blur_background||!1,y=e.attention_effect||"none",v=e.shadow_style||"elevated",w=e.entry_animation||"scale",k=function(e){var t=e.replace("#","");return[parseInt(t.substring(0,2),16),parseInt(t.substring(2,4),16),parseInt(t.substring(4,6),16)]},_=k(o),C=function(e){return"rgba("+_[0]+", "+_[1]+", "+_[2]+", "+e+")"},S=(t=40,n=k(o),"rgb("+Math.min(255,n[0]+t)+", "+Math.min(255,n[1]+t)+", "+Math.min(255,n[2]+t)+")"),M={sunset:["#f97316","#ec4899"],ocean:["#06b6d4","#3b82f6"],forest:["#22c55e","#14b8a6"],purple:["#8b5cf6","#ec4899"],fire:["#ef4444","#f97316"],midnight:["#1e3a8a","#7c3aed"],aurora:["#06b6d4","#8b5cf6","#ec4899"]};if("none"===u)r=o;else if("custom"===u){var z=[b,g,x].filter(Boolean);r=z.length>1?"linear-gradient("+h+"deg, "+z.join(", ")+")":o}else r=M[u]?"linear-gradient("+h+"deg, "+M[u].join(", ")+")":o;var L,A,T={bubble:{radius:"50%",width:d.size+"px",height:d.size+"px",layout:"icon"},pill:{radius:"9999px",width:1.8*d.size+"px",height:.85*d.size+"px",layout:"icon-text"},square:{radius:"16px",width:d.size+"px",height:d.size+"px",layout:"icon"},tab:{radius:"12px 0 0 12px",width:.7*d.size+"px",height:1.6*d.size+"px",layout:"icon-vertical"},bar:{radius:"16px 16px 0 0",width:3*d.size+"px",height:.75*d.size+"px",layout:"icon-text"}},q=T[p]||T.bubble,Y={none:"none",subtle:"0 4px 12px rgba(0,0,0,0.15)",elevated:"0 8px 32px "+C(.4)+", 0 0 0 1px rgba(255, 255, 255, 0.1) inset, 0 2px 4px rgba(0, 0, 0, 0.1)",dramatic:"0 20px 60px rgba(0,0,0,0.4), 0 8px 24px "+C(.3),glow:"0 0 20px "+o+"80, 0 0 40px "+o+"40, 0 8px 32px rgba(0,0,0,0.3)"},j=Y[v]||Y.elevated,I="none"===v?"none":"glow"===v?"0 0 30px "+o+"90, 0 0 60px "+o+"60, 0 12px 40px rgba(0,0,0,0.3)":"dramatic"===v?"0 24px 70px rgba(0,0,0,0.5), 0 12px 32px "+C(.4):"0 12px 40px "+C(.5)+", 0 0 0 1px rgba(255, 255, 255, 0.15) inset, 0 4px 8px rgba(0, 0, 0, 0.15)",D="",H="none",B="";return"pulse"===y?(H="s2c-pulse 2s ease-out infinite",B="@keyframes s2c-pulse { 0% { transform: scale(1); opacity: 0.5; } 100% { transform: scale(1.4); opacity: 0; } }"):"bounce"===y?(D="animation: s2c-bounce 2s ease-in-out infinite;",B="@keyframes s2c-bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }"):"glow"===y?(D="animation: s2c-glow 2s ease-in-out infinite;",B="@keyframes s2c-glow { 0%, 100% { box-shadow: "+j+"; } 50% { box-shadow: 0 0 30px "+o+"90, 0 0 60px "+o+"50, 0 8px 32px rgba(0,0,0,0.3); } }"):"shake"===y?(D="animation: s2c-shake 3s ease-in-out infinite;",B="@keyframes s2c-shake { 0%, 90%, 100% { transform: rotate(0); } 92% { transform: rotate(-8deg); } 94% { transform: rotate(8deg); } 96% { transform: rotate(-6deg); } 98% { transform: rotate(6deg); } }"):"ring"===y&&(H="s2c-ring 2s ease-out infinite",B="@keyframes s2c-ring { 0% { transform: scale(1); opacity: 0.6; box-shadow: 0 0 0 0 "+o+"80; } 100% { transform: scale(1.5); opacity: 0; box-shadow: 0 0 0 12px "+o+"00; } }"),"fade"===w?(L="s2c-fade-in",A="@keyframes s2c-fade-in { from { opacity: 0; } to { opacity: 1; } }"):"slide"===w?(L="s2c-slide-in",A="@keyframes s2c-slide-in { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }"):"bounce"===w?(L="s2c-bounce-in",A="@keyframes s2c-bounce-in { 0% { opacity: 0; transform: translateY(30px) scale(0.9); } 50% { transform: translateY(-8px) scale(1.02); } 100% { opacity: 1; transform: translateY(0) scale(1); } }"):"none"===w?(L="none",A=""):(L="s2c-scale-in",A="@keyframes s2c-scale-in { from { opacity: 0; transform: translateY(24px) scale(0.95); } to { opacity: 1; transform: translateY(0) scale(1); } }"),"*, *::before, *::after {  box-sizing: border-box;  font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;  margin: 0;  padding: 0;}.s2c-bubble {  position: fixed;  width: "+q.width+";  height: "+q.height+";  border-radius: "+q.radius+";  cursor: pointer;  display: flex;  align-items: center;  justify-content: center;"+("icon-text"===q.layout?"  gap: 8px;":"")+("icon-vertical"===q.layout?"  flex-direction: column;":"")+"  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);  z-index: "+i+";  background: "+r+";  opacity: "+f+";  box-shadow: "+j+";"+(m?"  backdrop-filter: blur(10px);":"")+"  "+D+"  border: none;  outline: none;}.s2c-bubble::before {  content: '';  position: absolute;  inset: 0;  border-radius: "+q.radius+";  padding: 1px;  background: linear-gradient(135deg, rgba(255,255,255,0.3), rgba(255,255,255,0.05));  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);  -webkit-mask-composite: xor;  mask-composite: exclude;  pointer-events: none;}.s2c-bubble:hover {  transform: scale(1.1) translateY(-2px);  box-shadow: "+I+";}.s2c-bubble:active {  transform: scale(1.05);}.s2c-bubble:focus-visible {  outline: 2px solid white;  outline-offset: 3px;}.s2c-bubble svg {  width: "+d.icon+"px;  height: "+d.icon+"px;  color: white;  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));  transition: transform 0.3s ease;}.s2c-bubble .s2c-bubble-label {  color: white;  font-size: 14px;  font-weight: 600;  white-space: nowrap;}.s2c-bubble:hover svg {  transform: scale(1.1);}.s2c-bubble.bottom-right {  bottom: calc("+("bar"===p?"0px":"24px")+" + env(safe-area-inset-bottom, 0px));  right: "+("tab"===p?"0":"24px")+";}.s2c-bubble.bottom-left {  bottom: calc("+("bar"===p?"0px":"24px")+" + env(safe-area-inset-bottom, 0px));  left: "+("tab"===p?"0":"24px")+";}"+("tab"===p?".s2c-bubble.bottom-left { border-radius: 0 12px 12px 0; }":"")+("bar"===p?".s2c-bubble.bottom-right, .s2c-bubble.bottom-left { right: auto; left: 50%; transform: translateX(-50%); }.s2c-bubble.bottom-right:hover, .s2c-bubble.bottom-left:hover { transform: translateX(-50%) translateY(-2px); }":"")+".s2c-bubble::after {  content: '';  position: absolute;  width: 100%;  height: 100%;  border-radius: "+q.radius+";  background: inherit;  animation: "+H+";  z-index: -1;"+("none"===H?"  display: none;":"")+"}"+B+".s2c-window {  position: fixed;  width: 400px;  height: 560px;  max-height: calc(100vh - 100px);  border-radius: 24px;  background: linear-gradient(180deg, "+s+" 0%, #0a0a1a 100%);  box-shadow: 0 32px 64px -12px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.08), 0 0 80px "+C(.15)+";  display: none;  flex-direction: column;  overflow: hidden;  z-index: "+a+";}.s2c-window.open {  display: flex;  animation: "+L+" 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);}"+A+".s2c-window.bottom-right {  bottom: calc("+(d.size+40)+"px + env(safe-area-inset-bottom, 0px));  right: 24px;}.s2c-window.bottom-left {  bottom: calc("+(d.size+40)+"px + env(safe-area-inset-bottom, 0px));  left: 24px;}@media (max-width: 480px) {  .s2c-window {    width: calc(100vw - 16px);    height: 65vh !important;    max-height: 450px !important;    bottom: calc(70px + env(safe-area-inset-bottom, 0px)) !important;    right: 8px !important;    left: 8px !important;    border-radius: 20px;  }  .s2c-bubble {    bottom: calc("+("bar"===p?"0px":"16px")+" + env(safe-area-inset-bottom, 0px)) !important;    right: "+("tab"===p?"0":"16px")+" !important;  }}.s2c-header {  padding: 20px 24px;  background: "+(r.includes("gradient")?r:"linear-gradient(135deg, "+o+" 0%, "+S+" 100%)")+";  color: white;  display: flex;  align-items: center;  justify-content: space-between;  flex-shrink: 0;  position: relative;  overflow: hidden;}.s2c-header::before {  content: '';  position: absolute;  top: -50%;  right: -20%;  width: 200px;  height: 200px;  background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);  pointer-events: none;}.s2c-header-info {  display: flex;  flex-direction: column;  position: relative;  z-index: 1;}.s2c-header-title {  font-size: 17px;  font-weight: 700;  display: flex;  align-items: center;  gap: 10px;  letter-spacing: -0.02em;}.s2c-status-dot {  width: 10px;  height: 10px;  background: #22c55e;  border-radius: 50%;  flex-shrink: 0;  box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.25), 0 0 12px rgba(34, 197, 94, 0.5);  animation: s2c-status-pulse 2s ease-in-out infinite;}@keyframes s2c-status-pulse {  0%, 100% { box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.25), 0 0 12px rgba(34, 197, 94, 0.5); }  50% { box-shadow: 0 0 0 5px rgba(34, 197, 94, 0.15), 0 0 20px rgba(34, 197, 94, 0.6); }}.s2c-header-subtitle {  font-size: 13px;  opacity: 0.9;  margin-top: 4px;  margin-left: 20px;  font-weight: 500;}.s2c-close {  background: rgba(255, 255, 255, 0.15);  border: none;  color: white;  cursor: pointer;  padding: 8px;  border-radius: 12px;  transition: all 0.2s ease;  position: relative;  z-index: 1;  backdrop-filter: blur(10px);}.s2c-close:hover {  background: rgba(255, 255, 255, 0.25);  transform: scale(1.05);}.s2c-close:focus-visible {  outline: 2px solid white;  outline-offset: 2px;}.s2c-close svg {  width: 18px;  height: 18px;  display: block;}.s2c-messages {  flex: 1;  padding: 20px;  overflow-y: auto;  display: flex;  flex-direction: column;  gap: 16px;  background: "+s+";  scrollbar-width: thin;  scrollbar-color: rgba(255,255,255,0.1) transparent;}.s2c-messages::-webkit-scrollbar { width: 6px; }.s2c-messages::-webkit-scrollbar-track { background: transparent; }.s2c-messages::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 3px; }.s2c-message {  max-width: 85%;  padding: 14px 18px;  font-size: 14px;  line-height: 1.6;  animation: s2c-message-in 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);  letter-spacing: -0.01em;}@keyframes s2c-message-in {  from { opacity: 0; transform: translateY(12px) scale(0.95); }  to { opacity: 1; transform: translateY(0) scale(1); }}.s2c-message.user {  align-self: flex-end;  background: linear-gradient(135deg, "+c+" 0%, "+S+" 100%);  color: white;  border-radius: 20px 20px 6px 20px;  box-shadow: 0 4px 16px "+C(.3)+";}.s2c-message.assistant {  align-self: flex-start;  background: "+l+";  color: #e5e7eb;  border-radius: 20px 20px 20px 6px;  border: 1px solid rgba(255, 255, 255, 0.06);  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);}.s2c-typing {  display: flex;  gap: 6px;  padding: 16px 20px;  align-self: flex-start;  background: "+l+";  border-radius: 20px 20px 20px 6px;  border: 1px solid rgba(255, 255, 255, 0.06);}.s2c-typing-dot {  width: 8px;  height: 8px;  background: linear-gradient(135deg, "+o+", "+S+");  border-radius: 50%;  animation: s2c-typing 1.4s ease-in-out infinite;}.s2c-typing-dot:nth-child(2) { animation-delay: 0.2s; }.s2c-typing-dot:nth-child(3) { animation-delay: 0.4s; }@keyframes s2c-typing {  0%, 100% { opacity: 0.3; transform: scale(0.8) translateY(0); }  50% { opacity: 1; transform: scale(1) translateY(-4px); }}.s2c-quick-replies {  display: flex;  flex-wrap: wrap;  gap: 10px;  padding: 0 20px 16px;  background: "+s+";}.s2c-quick-reply {  padding: 10px 18px;  background: "+C(.1)+";  border: 1px solid "+C(.3)+";  border-radius: 24px;  font-size: 13px;  color: "+S+";  cursor: pointer;  transition: all 0.25s ease;  font-weight: 600;  letter-spacing: -0.01em;}.s2c-quick-reply:hover {  background: linear-gradient(135deg, "+o+" 0%, "+S+" 100%);  color: white;  border-color: transparent;  transform: translateY(-2px);  box-shadow: 0 4px 16px "+C(.4)+";}.s2c-quick-reply:focus-visible {  outline: 2px solid "+S+";  outline-offset: 2px;}.s2c-input-area {  padding: 16px 20px calc(20px + env(safe-area-inset-bottom, 0px));  display: flex;  gap: 12px;  background: linear-gradient(180deg, "+s+" 0%, #080814 100%);  flex-shrink: 0;  border-top: 1px solid rgba(255, 255, 255, 0.06);}.s2c-input {  flex: 1;  padding: 14px 20px;  border: 1px solid rgba(255, 255, 255, 0.1);  border-radius: 16px;  font-size: 14px;  outline: none;  transition: all 0.25s ease;  color: #f3f4f6;  background: rgba(255, 255, 255, 0.05);  font-weight: 500;}.s2c-input:focus {  background: rgba(255, 255, 255, 0.08);  border-color: "+C(.5)+";  box-shadow: 0 0 0 3px "+C(.15)+";}.s2c-input::placeholder { color: #6b7280; }.s2c-send {  width: 48px;  height: 48px;  border: none;  border-radius: 16px;  cursor: pointer;  display: flex;  align-items: center;  justify-content: center;  transition: all 0.25s ease;  background: linear-gradient(135deg, "+o+" 0%, "+S+" 100%);  flex-shrink: 0;  box-shadow: 0 4px 16px "+C(.3)+";}.s2c-send:disabled {  opacity: 0.5;  cursor: not-allowed;  box-shadow: none;}.s2c-send:not(:disabled):hover {  transform: scale(1.05) translateY(-1px);  box-shadow: 0 6px 24px "+C(.45)+";}.s2c-send:not(:disabled):active {  transform: scale(0.98);}.s2c-send:focus-visible {  outline: 2px solid white;  outline-offset: 2px;}.s2c-send svg {  width: 20px;  height: 20px;  fill: white;}.s2c-powered {  padding: 12px;  text-align: center;  font-size: 11px;  color: #6b7280;  background: #080814;  border-top: 1px solid rgba(255, 255, 255, 0.04);}.s2c-powered a {  color: "+S+";  text-decoration: none;  font-weight: 600;  transition: color 0.2s;}.s2c-powered a:hover { color: "+S+"; }.s2c-powered.hidden { display: none; }.s2c-link-btn {  display: inline-flex;  align-items: center;  gap: 8px;  margin-top: 12px;  padding: 12px 24px;  background: linear-gradient(135deg, "+o+" 0%, "+S+" 100%);  color: white !important;  text-decoration: none;  border-radius: 14px;  font-weight: 700;  font-size: 14px;  transition: all 0.25s ease;  box-shadow: 0 4px 16px "+C(.35)+";  letter-spacing: -0.01em;}.s2c-link-btn:hover {  transform: translateY(-2px);  box-shadow: 0 8px 24px "+C(.45)+";}.s2c-link-btn svg { width: 16px; height: 16px; }.s2c-sr-only {  position: absolute;  width: 1px;  height: 1px;  padding: 0;  margin: -1px;  overflow: hidden;  clip: rect(0, 0, 0, 0);  white-space: nowrap;  border: 0;}.s2c-consent {  padding: 14px 18px;  background: rgba(255,255,255,0.06);  border: 1px solid rgba(255,255,255,0.1);  border-radius: 16px;  font-size: 12px;  color: #9ca3af;  line-height: 1.5;}.s2c-consent-text {  margin-bottom: 10px;}.s2c-consent-btns {  display: flex;  gap: 8px;}.s2c-consent-btn {  flex: 1;  padding: 8px 12px;  border: none;  border-radius: 10px;  font-size: 12px;  font-weight: 600;  cursor: pointer;  transition: all 0.2s ease;}.s2c-consent-btn.accept {  background: "+o+";  color: white;}.s2c-consent-btn.accept:hover {  filter: brightness(1.1);}.s2c-consent-btn.decline {  background: rgba(255,255,255,0.08);  color: #9ca3af;  border: 1px solid rgba(255,255,255,0.1);}.s2c-consent-btn.decline:hover {  background: rgba(255,255,255,0.12);  color: #d1d5db;}"}(S),x.appendChild(r),function(){var e=S.widget_position||"bottom-right",t=S.bubble_icon||"sparkle",n=L[t]||L.sparkle,r=S.header_title||S.business_name,i=S.header_subtitle||"Typically replies instantly",a=!1!==S.show_branding,o=S.button_shape||"bubble";(f=document.createElement("button")).className="s2c-bubble "+e,f.setAttribute("aria-label","Open chat"),f.innerHTML="pill"===o?n+'<span class="s2c-bubble-label">Chat</span>':"bar"===o?n+'<span class="s2c-bubble-label">Chat with us</span>':n;f.addEventListener("click",I),(m=document.createElement("div")).className="s2c-window "+e,m.setAttribute("role","dialog"),m.setAttribute("aria-label",c(r)+" chat"),m.setAttribute("aria-hidden","true");var l="";S.quick_replies&&S.quick_replies.length>0&&(l='<div class="s2c-quick-replies">'+S.quick_replies.map(function(e){return'<button class="s2c-quick-reply">'+c(e)+"</button>"}).join("")+"</div>");var d=a?'<div class="s2c-powered">Powered by <a href="https://site2crm.io" target="_blank" rel="noopener">Site2CRM</a></div>':'<div class="s2c-powered hidden"></div>';m.innerHTML='<div class="s2c-header">  <div class="s2c-header-info">    <div class="s2c-header-title">      <span class="s2c-status-dot" aria-hidden="true"></span>      '+c(r)+"    </div>"+(i?'    <div class="s2c-header-subtitle">'+c(i)+"</div>":"")+'  </div>  <button class="s2c-close" aria-label="Close chat">'+A+'</button></div><div class="s2c-messages" role="log" aria-live="polite" aria-label="Chat messages"></div>'+l+'<div class="s2c-input-area">  <input type="text" class="s2c-input" placeholder="Type your message..." aria-label="Type your message" />  <button class="s2c-send" aria-label="Send message">'+T+"</button></div>"+d,y=m.querySelector(".s2c-messages"),v=m.querySelector(".s2c-input"),w=m.querySelector(".s2c-send"),k=m.querySelector(".s2c-quick-replies");var p=m.querySelector(".s2c-close");p.addEventListener("click",I),w.addEventListener("click",B),v.addEventListener("keypress",function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),B())}),k&&k.querySelectorAll(".s2c-quick-reply").forEach(function(e){e.addEventListener("click",function(){v.value=e.textContent,B(),k.style.display="none"})});x.appendChild(f),x.appendChild(m),x.addEventListener("keydown",function(e){"Escape"===e.key&&_&&(e.preventDefault(),I(),f.focus())}),void m.addEventListener("keydown",function(e){if("Tab"===e.key){var t=m.querySelectorAll('button:not([disabled]), input:not([disabled]), a[href], [tabindex]:not([tabindex="-1"])');if(0!==t.length){var n=t[0],r=t[t.length-1];e.shiftKey?x.activeElement!==n&&e.target!==n||(e.preventDefault(),r.focus()):x.activeElement!==r&&e.target!==r||(e.preventDefault(),n.focus())}}}),function(){if(!window.visualViewport)return;var e=window.visualViewport.height;window.visualViewport.addEventListener("resize",function(){if(_&&m){var t=e-window.visualViewport.height;t>100?(m.style.transform="translateY(-"+t+"px)",m.style.maxHeight=window.visualViewport.height-80+"px"):(m.style.transform="",m.style.maxHeight="")}})}(),N(),function(){var e=history.pushState;history.pushState=function(){e.apply(this,arguments),setTimeout(N,50)};var t=history.replaceState;history.replaceState=function(){t.apply(this,arguments),setTimeout(N,50)},window.addEventListener("popstate",function(){setTimeout(N,50)})}(),S.greeting&&D("assistant",S.greeting);null===b&&((g=document.createElement("div")).className="s2c-consent",g.setAttribute("role","alert"),g.innerHTML='<div class="s2c-consent-text">This chat uses cookies and local storage to remember your session. You can decline and still chat anonymously.</div><div class="s2c-consent-btns">  <button class="s2c-consent-btn accept">Accept</button>  <button class="s2c-consent-btn decline">Decline</button></div>',y.appendChild(g),y.scrollTop=y.scrollHeight,g.querySelector(".accept").addEventListener("click",function(){b="1",u("s2c_gdpr_consent","1"),g.remove()}),g.querySelector(".decline").addEventListener("click",function(){b="0",u("s2c_gdpr_consent","0"),s("set","s2c_chat_session",""),g.remove()}));var g}()}catch(e){console.error("Site2CRM Chat Widget: Init failed",e)}}function I(){_=!_,m.classList.toggle("open",_),m.setAttribute("aria-hidden",String(!_)),f.setAttribute("aria-label",_?"Close chat":"Open chat"),f.setAttribute("aria-expanded",String(_)),_&&v.focus()}function D(e,t){M.push({role:e,content:t});var n=document.createElement("div");n.className="s2c-message "+e,n.setAttribute("role","listitem"),"assistant"===e?n.innerHTML=function(e){function t(e){var t=e.toLowerCase();return t.includes("/signup")||t.includes("/register")?"Sign Up Free":t.includes("/pricing")?"View Pricing":t.includes("/demo")||t.includes("calendly")||t.includes("cal.com")?"Book Demo":t.includes("/trial")?"Start Free Trial":t.includes("/contact")?"Contact Us":t.includes("/schedule")||t.includes("/book")?"Schedule Now":t.includes("/form")||t.includes("/apply")?"Fill Out Form":t.includes("/download")?"Download":(t.includes("/learn")||t.includes("/docs"),"Learn More")}function n(e){return/^https?:\/\//i.test(e)?e:"https://"+e}var r=[];function i(e,i){var a=n(e),o='<br><a href="'+a+'" target="_blank" rel="noopener" class="s2c-link-btn">'+(i||t(a))+" "+q+"</a>",s="__LINK_PLACEHOLDER_"+r.length+"__";return r.push(o),s}var a=e;return a=c(a=(a=(a=a.replace(/\[([^\]]+)\]\(([^)]+)\)/g,function(e,t,n){return i(n,t)})).replace(/(https?:\/\/[^\s<]+[^\s<.,;:'")\]])/gi,function(e){return i(e)})).replace(/((?:www\.)?[a-zA-Z0-9][-a-zA-Z0-9]*\.(?:com|io|co|org|net|ai|app|dev)(?:\/[^\s<]*[^\s<.,;:'")\]])?)/gi,function(e,t,n){return e.includes("@")||n>0&&"@"===a[n-1]?e:i(e)})),r.forEach(function(e,t){a=a.replace("__LINK_PLACEHOLDER_"+t+"__",e)}),a}(t):n.textContent=t,y.appendChild(n),y.scrollTop=y.scrollHeight}function H(){var e=y.querySelector("[data-s2c-typing]");e&&e.remove()}async function B(){var e=v.value.trim();if(e&&!C){var n=Date.now();if(!(n-z<1e3)){var r;z=n,k&&(k.style.display="none"),D("user",e),v.value="",v.disabled=!0,w.disabled=!0,C=!0,(r=document.createElement("div")).className="s2c-typing",r.setAttribute("data-s2c-typing","1"),r.setAttribute("role","status"),r.setAttribute("aria-label","Assistant is typing"),r.innerHTML='<div class="s2c-typing-dot"></div><div class="s2c-typing-dot"></div><div class="s2c-typing-dot"></div>',y.appendChild(r),y.scrollTop=y.scrollHeight;var i=new AbortController,a=setTimeout(function(){i.abort()},15e3);try{var o={message:e};"0"===b?o.session_id="s2c_ephemeral_"+Date.now().toString(36)+"_"+Math.random().toString(36).substr(2,6):(o.session_id=d,o.page_url=window.location.href,o.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone);var s=await fetch(l+"/message?widget_key="+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o),signal:i.signal});if(clearTimeout(a),H(),!s.ok)throw new Error("API error");var c=await s.json();D("assistant",c.response),c.lead_captured&&console.log("Site2CRM: Lead captured",c.captured_email||c.captured_phone)}catch(e){clearTimeout(a),H(),"AbortError"===e.name?D("assistant","Sorry, the response is taking too long. Please try again."):D("assistant","Sorry, I'm having trouble connecting. Please try again in a moment."),console.error("Site2CRM Chat Widget: Send failed",e)}finally{v.disabled=!1,w.disabled=!1,C=!1,v.focus()}}}}function N(){if(h){var e=o();h.style.display=e?"none":"",e&&_&&I()}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",j):j()}();